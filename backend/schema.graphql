"""Exposes a URL that specifies the behavior of this scalar."""
directive @specifiedBy(
  """The URL that specifies the behavior of this scalar."""
  url: String!
) on SCALAR

"""
Indicates exactly one field must be supplied and this field must not be `null`.
"""
directive @oneOf on INPUT_OBJECT

type Event {
  id: ID!
  eventType: String!
  timestamp: String!
  payload: JSON
}

type DeviceState {
  id: ID!
  entityId: String!
  currentState: String!
  friendlyName: String
  lastChanged: String!
  lastEventId: String!
  attributes: JSON
  createdAt: String!
  updatedAt: String!
}

type DehumidifierRun {
  id: ID!
  entityId: String!
  status: String!
  startTime: String!
  endTime: String
  duration: Int
  startEnergyReading: Float!
  endEnergyReading: Float
  energyConsumed: Float
  energyUnit: String!
  startHumidityReading: Float
  endHumidityReading: Float
  humidityUnit: String
  startTemperatureReading: Float
  endTemperatureReading: Float
  temperatureUnit: String
  startedBy: String!
  humidityThreshold: Float
  startEventId: String!
  endEventId: String
  errorMessage: String
  createdAt: String!
  updatedAt: String!
}

"""
The `JSON` scalar type represents JSON values as specified by [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf).
"""
scalar JSON

type Mutation {
  ingestEvent(eventType: String!, payload: JSON): Event!
}

type Query {
  events: [Event!]!
  deviceStates: [DeviceState!]!
  deviceState(entityId: String!): DeviceState
  dehumidifierRuns: [DehumidifierRun!]!
  dehumidifierRun(id: ID!): DehumidifierRun
}

type Subscription {
  eventIngested: Event!
  deviceStateChanged: DeviceState!
  dehumidifierRunChanged: DehumidifierRun!
}

